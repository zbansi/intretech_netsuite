package com.bansi.webservices.samples.dao;

import static com.bansi.webservices.samples.utils_2019_1.ParsingUtils.getInternalId;

import java.rmi.RemoteException;

import javax.annotation.ParametersAreNonnullByDefault;

import com.bansi.webservices.samples.v2019_1.Fields;
import com.bansi.webservices.samples.v2019_1.WsClient_2019_1;
import com.netsuite.webservices.lists.accounting_2019_1.Bom;
import com.netsuite.webservices.platform.common_2019_1.BomSearchBasic;
import com.netsuite.webservices.platform.core_2019_1.SearchResult;
import com.netsuite.webservices.platform.core_2019_1.SearchStringField;
import com.netsuite.webservices.platform.core_2019_1.types.SearchStringFieldOperator;

import static com.bansi.webservices.samples.Messages.*;

@ParametersAreNonnullByDefault
public class Dao {
	private WsClient_2019_1 client;

	public Dao(WsClient_2019_1 client) {
		this.client = client;
	}

	public String getBomIdbyName(String pName) {
		SearchResult response = null;
		BomSearchBasic bomsb = new BomSearchBasic();
		SearchStringField name = new SearchStringField();
		name.setOperator(SearchStringFieldOperator.is);
		name.setSearchValue(pName);
		bomsb.setName(name);

		try {
			response = client.callSearch(bomsb);

		} catch (RemoteException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		Bom rec = (Bom) response.getRecordList()[0];
		String internalId = new Fields(rec).get(INTERNAL_ID);
		return internalId;

	}

}
