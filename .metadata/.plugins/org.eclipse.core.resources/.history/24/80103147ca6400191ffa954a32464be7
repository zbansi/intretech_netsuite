/*
 * NApiVersion 2.x
 */
require([ 'N/record' ], function(record) {
	//create and save BOM and BOM Reversion
	function createAndSaveBomRecord(bomContent) {
		bomContent.forEach(function(bomData) {
			var bomRecord = record.create({
				type : record.Type.BOM,
				isDynamic : true
			});
			for ( var key in bomData) {
				if (bomData.hasOwnProperty(key)) {
					bomRecord.setValue({
						fieldId : key,
						value : bomData[key]
					});
				}
			}

			var bomId = bomRecord.save({
				enableSourcing : false,
				ignoreMandatoryFields : false
			});
		});
	}

	function createAndSaveBomReversionRecord(bomRevisionContent) {
		bomRevisionContent.forEach(function(bomRevisionData) {
			var bomRevisionRecord = record.create({
				type : record.Type.BOM,
				isDynamic : true
			});
			for ( var key in bomRevisionData) {
				if (bomRevisionData.hasOwnProperty(key)) {
					bomRevisionRecord.setValue({
						fieldId : key,
						value : bomRevisionData[key]
					});
				}
			}

			var bomId = bomRecord.save({
				enableSourcing : false,
				ignoreMandatoryFields : false
			});
		});
	}

	var bomContent = [ {
		'atpmethod' : 'CUMULATIVE_ATP_WITH_LOOK_AHEAD',
		'costcategory' : '1',
		'itemid' : 'EAI.TEST.190422003',
		'displayname' : 'EAI.TEST.190422003',
		'custitem_ps_yq_spec' : 'TEST',
		'revrecforecastrule' : '1',
		'taxschedule' : '1',
		'cogsaccount' : '223',
		'assetaccount' : '242',
		'includechildren' : true,
		'supplyreplenishmentmethod' : 'TIME_PHASED',
		'unitstype' : '3'//3 for PCS
	}, {
		'atpmethod' : 'CUMULATIVE_ATP_WITH_LOOK_AHEAD',
		'costcategory' : '1',
		'itemid' : 'EAI.TEST.190422004',
		'displayname' : 'EAI.TEST.190422004',
		'custitem_ps_yq_spec' : 'TEST',
		'revrecforecastrule' : '1',
		'taxschedule' : '1',
		'cogsaccount' : '223',
		'assetaccount' : '242',
		'includechildren' : true,
		'supplyreplenishmentmethod' : 'TIME_PHASED',
		'unitstype' : '3'//3 for PCS
	} ];
	var bomReversionContent = [ {
		'atpmethod' : 'CUMULATIVE_ATP_WITH_LOOK_AHEAD',
		'costcategory' : '1',
		'itemid' : 'EAI.TEST.190422003',
		'displayname' : 'EAI.TEST.190422003',
		'custitem_ps_yq_spec' : 'TEST',
		'revrecforecastrule' : '1',
		'taxschedule' : '1',
		'cogsaccount' : '223',
		'assetaccount' : '242',
		'includechildren' : true,
		'supplyreplenishmentmethod' : 'TIME_PHASED',
		'unitstype' : '3'//3 for PCS
	}, {
		'atpmethod' : 'CUMULATIVE_ATP_WITH_LOOK_AHEAD',
		'costcategory' : '1',
		'itemid' : 'EAI.TEST.190422004',
		'displayname' : 'EAI.TEST.190422004',
		'custitem_ps_yq_spec' : 'TEST',
		'revrecforecastrule' : '1',
		'taxschedule' : '1',
		'cogsaccount' : '223',
		'assetaccount' : '242',
		'includechildren' : true,
		'supplyreplenishmentmethod' : 'TIME_PHASED',
		'unitstype' : '3'//3 for PCS
	} ];
	createAndSaveBomRecord(bomContent);
	createAndSaveBomReversionRecord(bomReversionContent);
});
