/*
 * NApiVersion 2.x
 */
require([ 'N/record' ], function(record) {
	//create and save BOM and BOM Reversion
	function createAndSaveBomRecord(bomContent) {
		bomContent.forEach(function(bomData) {
			var bomRecord = record.create({
				type : record.Type.BOM,
				isDynamic : true
			});
			for ( var key in bomData) {
				if (bomData.hasOwnProperty(key)) {
					bomRecord.setValue({
						fieldId : key,
						value : bomData[key]
					});
				}
			}

			var bomId = bomRecord.save({
				enableSourcing : false,
				ignoreMandatoryFields : false
			});
		});
	}

	function createAndSaveBomReversionRecord(bomRevisionContent) {
		bomRevisionContent.forEach(function(bomRevisionData) {
			var bomRevisionRecord = record.create({
				type : record.Type.BOM_REVISION,
				isDynamic : true
			});
			for ( var key in bomRevisionData) {
				if (bomRevisionData.hasOwnProperty(key)) {
					bomRevisionRecord.setValue({
						fieldId : key,
						value : bomRevisionData[key]
					});
				}
			}

			var bomId = bomRecord.save({
				enableSourcing : false,
				ignoreMandatoryFields : false
			});
		});
	}

	function getItemId(itemNumber) {

	}

	var bomContent = [ {
		'availableforallassemblies' : false,
		'availableforalllocations' : true,
		'includechildren' : true,
		'memo' : 'EAI.TEST.190422A01',
		'name' : 'EAI.TEST.190422A01',
		'restricttoassemblies' : '572',
		'subsidiary' : '1',
		'usecomponentyield' : true,
		'usedonassembly' : true
	}, {
		'availableforallassemblies' : false,
		'availableforalllocations' : true,
		'includechildren' : true,
		'memo' : 'EAI.TEST.190422A02',
		'name' : 'EAI.TEST.190422A02',
		'restricttoassemblies' : '573',
		'subsidiary' : '1',
		'usecomponentyield' : true,
		'usedonassembly' : true
	} ];
	var bomRevisionContent = [ {
		'billofmaterial' : '',
		'effectivedate' : '',
		'memo' : '',
		'name' : '',
		'obsoletedate' : '',
		'list' : [ {}, {} ]
	}, {
		'billofmaterial' : '',
		'effectivedate' : '',
		'memo' : '',
		'name' : '',
		'obsoletedate' : '',
		'list' : [ {}, {} ]
	} ];
	createAndSaveBomRecord(bomContent);
	createAndSaveBomReversionRecord(bomRevisionContent);
});
